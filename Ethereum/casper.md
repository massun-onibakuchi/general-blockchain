# Casper  
PoWã®å•é¡Œç‚¹ï¼Œã‚†ã‚‹ãPoSã®æ¦‚è¦ã‹ã‚‰ã¯ã˜ã‚ã¦ï¼ŒEthereumã®PoSã®ã§ã‚ã‚‹Casperã«ã¤ã„ã¦

##  PoWã‹ã‚‰PoSã¸ã®ç§»è¡Œ
### PoWã®å•é¡Œ
- ãƒã‚¤ãƒŠãƒ¼ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚¿ï¼‰ã®ä¸­å¤®é›†æ¨©åŒ–

  ç‰¹ã«ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³ã«å½“ã¦ã¯ã¾ã‚‹ãŒï¼ŒPoWã§ã¯è¦æ¨¡ã®çµŒæ¸ˆãŒæˆã‚Šç«‹ã¤ãŸã‚ï¼Œå¤§è¦æ¨¡ãƒã‚¤ãƒŠãƒ¼ãŒå°è¦æ¨¡ãƒã‚¤ãƒŠãƒ¼ã«å¯¾ã—ã¦æœ‰åˆ©ã«ãƒã‚¤ãƒ‹ãƒ³ã‚°ã§ãã‚‹ï¼

- ã‚¨ãƒãƒ«ã‚®ãƒ¼åŠ¹ç‡  

  ã‚ˆãè¨€ã‚ã‚Œã‚‹ï¼

  ã‚¨ãƒãƒ«ã‚®ãƒ¼åŠ¹ç‡ãŒé«˜ãã¦ã‚‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¸ã®å‚åŠ ã‚³ã‚¹ãƒˆãŒå®‰ã„å ´åˆï¼Œæ”»æ’ƒã‚³ã‚¹ãƒˆã‚‚å®‰ããªã£ã¦ã—ã¾ã†ï¼ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³ã®å ´åˆã€ASICã®è²»ç”¨ã¨é›»æ°—ä»£ã¨ã„ã†ã‚³ã‚¹ãƒˆãŒæ›ã‹ã‚‹ãŸã‚æ”»æ’ƒè€…ã«ä¸€å®šã®ã‚³ã‚¹ãƒˆã‚’è² ã‚ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚‹ï¼Ethereumã®PoSã®å ´åˆï¼Œè‡ªèº«ãŒã‚¹ãƒ†ã‚¤ã‚¯ã—ã¦ã„ã‚‹ETHãŒæ²¡åã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã¨ã„ã†æ½œåœ¨çš„ãªãƒªã‚¹ã‚¯ã‚’è² ã‚ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã™ã‚‹ï¼ï¼ˆå‚è€ƒæ–‡çŒ®[3]ã€€è©³ç´°ã¯å¾Œè¿°ï¼‰

 - 51%æ”»æ’ƒ
 - ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£å•é¡Œ  
 ç¢ºç‡çš„ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£ã§ã‚ã‚‹ï¼Bitcoinã ã¨6ã‚³ãƒ³ãƒ•ã‚¡ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ¬²ã—ã„ã¨ã‚ˆãèã

## PoS  
PoSã§ã¯ãƒãƒªãƒ‡ãƒ¼ã‚¿ã¨ã„ã†é›†å›£ãŒæ¬¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’ææ¡ˆï¼ŒæŠ•ç¥¨ã‚’è¡Œã†ï¼ãƒãƒªãƒ‡ãƒ¼ã‚¿ã®æŠ•ç¥¨ã®é‡ã¿ã¯ãã®ãƒãƒªãƒ‡ãƒ¼ã‚¿ãŒã‚¹ãƒ†ã‚¤ã‚¯ã—ãŸå¤§ãã•ã«ä¾å­˜ã™ã‚‹ï¼

PoWã¯ãƒãƒƒã‚·ãƒ¥ãƒ‘ãƒ¯ãƒ¼ã«å¿œã˜ã¦ã€PoSã¯ã‚¹ãƒ†ã‚¤ã‚¯ã«å¿œã˜ã¦ãƒ–ãƒ­ãƒƒã‚¯ã‚’æ¡æ˜ã§ãã‚‹ç¢ºç‡ãŒæ±ºå®šã•ã‚Œã‚‹ï¼
"one unit of CPU power, one vote" it becomes "one currency unit, one vote". 

Ethereumå…¬å¼ã®PoSã®FAQã«ã‚ˆã‚‹ã¨ï¼Œ

In general, a proof of stake algorithm looks as follows. The blockchain keeps track of a set of validators, and anyone who holds the blockchain's base cryptocurrency (in Ethereum's case, ether) can become a validator by sending a special type of transaction that locks up their ether into a deposit. The process of creating and agreeing to new blocks is then done through a consensus algorithm that all current validators can participate in.

[Ethereum Wiki PoS-FAQ](https://github.com/ethereum/wiki/wiki/Proof-of-Stake-FAQ#what-is-proof-of-stake)


### PoSã®å•é¡Œ  
 - å¯Œã®ååœ¨åŒ–  
  
    å¤§è¦æ¨¡ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã«ç•™ã¾ã‚‹ç†ç”±ãŒå¤±ã‚ã‚Œã€ä¾¡æ ¼ã®ä¸‹è½ã«ã‚ˆã£ã¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒè„†å¼±ã«ãªã£ã¦ã—ã¾ã†ï¼
  ã‚¹ãƒ†ã‚¤ã‚¯ã™ã‚‹é‡ãŒå¤šã„ã»ã©ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç”Ÿæˆã§ãã‚‹ç¢ºç‡ãŒé«˜ããªã‚‹ãŸã‚ï¼å¯ŒãŒé›†ä¸­ã—ã‚„ã™ã„ï¼  

 - Nothing-At-Stakeå•é¡Œ
  
    PoWã®å ´åˆã€ãƒã‚¤ãƒŠãƒ¼ã¯ä¸€ç•ªé•·ã„ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã«æ¬¡ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã¤ã‘ã¦ãƒã‚¤ãƒ‹ãƒ³ã‚°ã™ã‚‹ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ãŒã¯ãŸã‚‰ã.
    ãªãœãªã‚‰ï¼Œã‚‚ã—è‡ªåˆ†ãŒç”Ÿæˆã—ãŸãƒ–ãƒ­ãƒƒã‚¯ãŒå«ã¾ã‚Œã‚‹ãƒ•ã‚©ãƒ¼ã‚¯ã—ãŸãƒã‚§ãƒ¼ãƒ³ãŒç”Ÿãæ®‹ã‚‰ãªã‹ã£ãŸå ´åˆï¼Œå ±é…¬ãŒå¾—ã‚‰ã‚Œãªã„ãŸã‚ï¼Œãã®ãƒã‚¤ãƒ‹ãƒ³ã‚°ã«æŠ•ã˜ãŸãƒã‚·ãƒ³ã®é›»æ°—ä»£ãªã©ã®ã‚³ã‚¹ãƒˆãŒå›åã§ããªããªã‚‹ï¼ã ã‹ã‚‰ï¼Œæ”»æ’ƒã—ãŸã‚Šï¼Œå¤šæ•°ã®ãƒ•ã‚©ãƒ¼ã‚¯ã‚’ãƒã‚¤ãƒ‹ãƒ³ã‚°ã™ã‚‹ã‚ˆã‚Šï¼Œå‹ã¡ãã†ãªãƒã‚§ãƒ¼ãƒ³ï¼Œã¤ã¾ã‚Šï¼Œã‚‚ã£ã¨ã‚‚é•·ã„ãƒ•ã‚©ãƒ¼ã‚¯ã«ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç¹‹ã’ã¦ã„ãæ–¹ãŒç†ã«é©ã£ã¦ã„ã‚‹ã‹ã‚‰ã§ã‚ã‚‹ï¼

    ä¸€æ–¹ã§ï¼ŒPoSã®å ´åˆï¼Œã‚‚ã£ã¨ã‚‚é•·ã„ãƒ•ã‚©ãƒ¼ã‚¯ã«ãƒ–ãƒ­ãƒƒã‚¯ã‚’ã¤ãªã’ã‚‹ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã¯ãªã„ï¼ãªãœãªã‚‰ï¼Œãƒ•ã‚©ãƒ¼ã‚¯ãŒè² ã‘ãŸå ´åˆã‚‚ã‚¹ãƒ†ã‚¤ã‚¯ã¯å¤±ã‚ã‚Œãšã€ãã®ã¾ã¾è¿”é‡‘ã•ã‚Œã‚‹ã ã‘ã§ã‚ã‚‹ã‹ã‚‰ã§ã‚ã‚‹ï¼ãã®ãŸã‚ï¼Œå…¨ã¦ã®ãƒ•ã‚©ãƒ¼ã‚¯ã‚’ã‚’åŒæ™‚ã«ä¼¸ã°ãã†ã¨ã™ã‚‹æ–¹ãŒç†ã«é©ã£ã¦ã„ã‚‹ãŸã‚ï¼Œæ­£å¸¸ã«æŒ¯ã‚‹èˆã†ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã¯ä½ã„ï¼

 - ãƒ­ãƒ³ã‚°ãƒ¬ãƒ³ã‚¸ã‚¢ã‚¿ãƒƒã‚¯  
    

## Casperã®ãƒ¢ãƒ‡ãƒ«  
Ethereumã®PoSã‚·ã‚¹ãƒ†ãƒ ã¯Casperã¨è¨€ã‚ã‚Œã‚‹  
 - CasperFFG   
Vitalikã«ã‚ˆã£ã¦ææ¡ˆ  
ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å‹  

 - CapsperCBC  
Vlad Zamfirã«ã‚ˆã£ã¦ææ¡ˆ  
PoSå‹  
  
## CasperFFG  
ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ã«ã¯ãƒã‚¤ãƒŠãƒ¼ã®ã‚ˆã†ã«ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç”Ÿæˆã—ãŸã‚Šã€ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£ã‚’ä¸ãˆã‚‹å½¹å‰²ãŒã‚ã‚‹ï¼Casper FFGã§ã¯ãƒã‚¤ãƒŠãƒ¼ãŒPoWã§ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç”Ÿæˆã—ã€ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ãŒPoSã§ç‰¹å®šã®ãƒ–ãƒ­ãƒƒã‚¯é«˜ã”ã¨ã«æ¤œè¨¼ã‚’è¡Œã„ã€ãƒã‚§ãƒ¼ãƒ³ã«ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£ã‚’ã‚‚ãŸã‚‰ã™.PoWã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã¯ç¢ºç‡çš„ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£ã‚’ã‚‚ãŸã‚‰ã™ã«ç•™ã¾ã‚‹ãŒã€Casper FFGã§ã¯PoSã«ã‚ˆã£ã¦ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£ãŒã‚‚ãŸã‚‰ã•ã‚Œã‚‹ï¼

å˜ç´”PoSã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«æ‡²ç½°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦slasherã‚’å°å…¥

## CasperFFGã®æµã‚Œ
PoWã§ãƒ–ãƒ­ãƒƒã‚¯ã‚’é€²ã‚ã¦ã„ã  
ç‰¹å®šã®ãƒ–ãƒ­ãƒƒã‚¯é«˜(ç¾åœ¨ã®ã¨ã“ã‚ 32ãƒ–ãƒ­ãƒƒã‚¯)ã‚’1epochã¨ã™ã‚‹  
1epochã®çµ‚ã‚ã‚Šã”ã¨ã«checkpointãŒã‚ã‚Šï¼Œcheckpointã§ãƒãƒªãƒ‡ãƒ¼ã‚¿ãŒPoSã«ã‚ˆã‚‹æŠ•ç¥¨ã‚’è¡Œã†ï¼
å…¨æŠ•ç¥¨æ•°ã®2/3ä»¥ä¸Šã®æŠ•ç¥¨ãŒé›†ã¾ã‚‹ã¨justfiedã¨ãªã‚‹.  justifiedï¼šä»®ã®finalizedã®çŠ¶æ…‹ã®ã“ã¨
ã¾ãŸï¼Œæ¬¡ã®epochã¾ã§PoWã§ãƒ–ãƒ­ãƒƒã‚¯ã‚’é€²ã‚ã‚‹  
æ¬¡ã®epochãŒjustifiedã•ã‚Œã‚‹ã¨ï¼Œã²ã¨ã¤å‰ã®justifiedã•ã‚ŒãŸcheckpointã¯finalizedã¨ãªã‚‹ï¼  
finalisedã•ã‚ŒãŸã¨ã“ã‚ã‹ã‚‰ï¼Œä¸Šè¿°ã®éç¨‹ã‚’ç¹°ã‚Šè¿”ã™ï¼  

Casper FFGã§ã¯ãƒãƒªãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã£ã¦Finalizeã•ã‚ŒãŸãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¯å¾Œã«è¦†ã•ã‚Œã‚‹ã“ã¨ã¯ãªã„ãŸã‚ï¼Œãƒ­ãƒ³ã‚°ãƒ¬ãƒ³ã‚¸ã‚¢ã‚¿ãƒƒã‚¯ã¨å‘¼ã°ã‚Œã‚‹éå»ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’æ›¸ãæ›ãˆã‚‹ã‚ˆã†ãªæ”»æ’ƒã‚’é˜²ãï¼ã¾ãŸï¼Œcheckpointã¨finalizationã«ã‚ˆã£ã¦ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã«ãƒ•ã‚¡ã‚¤ãƒŠãƒªãƒ†ã‚£ã‚’ã‚‚ãŸã‚‰ã™ï¼

https://blog.ethereum.org/2020/02/12/validated-staking-on-eth2-2-two-ghosts-in-a-trench-coat/ã€€ã€€
ã«ã‚ˆã‚‹ã¨

 > FFG employs a clever trick. Votes actually consist of two sub-votes, one for the epoch that is attempting to be justified and another for an earlier epoch that is to become finalised. This saves a lot of extra communication between nodes and helps to achieve the goal of scaling to millions of validators.

checkpointã§ãƒ•ã‚©ãƒ¼ã‚¯ãŒã‚ã£ãŸå ´åˆï¼ŒäºŒé‡ã«æŠ•ç¥¨ã—ãŸã‚Šï¼Œä¸¡æ–¹ã«æŠ•ç¥¨ã—ãŸã‚Šã™ã‚‹ã“ã¨ã¯è¨±ã•ã‚Œãšï¼Œã“ã‚Œã‚‰ã®Slashing Conditionã«é•åã—ãŸãƒãƒªãƒ‡ãƒ¼ã‚¿ã¯slasherã«ã‚ˆã£ã¦ã‚¹ãƒ†ã‚¤ã‚¯ã‚’æ²¡åã•ã‚Œã‚‹

### slashingã®å½¹å‰²
 1. to make it prohibitively expensive to attack eth2,
 2. to stop validators from being lazy by checking that they actually perform their duties. 

ã‚·ãƒã‹ã‚Œã‚‹æ¡ä»¶slashing condition ã¯eth2 phase0ã§ã¯ä»Šã®æ‰€ï¼ŒäºŒé‡æŠ•ç¥¨ã‚„å…¥ã‚Œå­æŠ•ç¥¨ã§ã‚ã‚‹ï¼ˆè©³ç´°ã¯ã‚ªãƒªã‚¸ãƒŠãƒ«ã®è«–æ–‡ã‚’å‚ç…§ï¼‰

### ãƒãƒªãƒ‡ãƒ¼ã‚¿ãŒå–„æ„ã«ã¯ãŸã‚‰ãã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–
eth2ã§ã¯ï¼Œãƒãƒªãƒ‡ãƒ¼ã‚¿ã¯æ€ æƒ°ã§ï¼Œè³„è³‚ã‚’å—ã‘å–ã‚Šï¼Œã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ãŒãªã„é™ã‚Šã‚·ã‚¹ãƒ†ãƒ ã«æ”»æ’ƒã‚’ä»•æ›ã‘ã‚ˆã†ã¨ã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã‚‹ï¼
slashingã«ã‚ˆã‚‹ç½°ã¯æ‚ªã„è¡Œå‹•ã‚’å¦¨ã’ã‚‹ãŒï¼Œãƒãƒªãƒ‡ãƒ¼ã‚¿ã«eth2ã«æ©æµã‚’ä¸ãˆã‚‹è¡Œå‹•ã‚’å–ã‚‰ã›ã‚‹ãŸã‚ã«ã¯å ±é…¬ãŒå¿…è¦ã§ã‚ã‚‹ï¼(è©³ç´°ã¯å‚è€ƒæ–‡çŒ®[1])ä»¥ä¸‹ã¯å‚è€ƒæ–‡çŒ®[1]ã‚ˆã‚ŠæŠœç²‹

 - Whistleblower rewards ğŸš“  
 é•åã—ã¦ã„ã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¤ã‘ã¦ãƒã‚¯ã‚‹ï¼Ÿï¼Ÿã¨å ±é…¬ãŒã‚‚ã‚‰ãˆã‚‹ï¼  

 - Proposer rewards â¬œï¸â›“â¬›ï¸â›“â¬œï¸  
 ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹ä»•äº‹ã«ãƒ©ãƒ³ãƒ€ãƒ ã«ä»»å‘½ã•ã‚ŒãŸãƒãƒªãƒ‡ãƒ¼ã‚¿ã‚’ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ¼proposerã¨ã„ã†ï¼ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ¼ã¯ã‚ã‚‹ä¸ãˆã‚‰ã‚Œã‚‹ä»•äº‹ã‚’è¡Œã†ã¨å ±é…¬ãŒä¸ãˆã‚‰ã‚Œã‚‹ï¼

 - Attester rewards âœ”  
  ãƒãƒªãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã£ã¦æŠ•ç¥¨ã•ã‚Œã‚‹ç¥¨ã¯Attestationã¨è¨€ã‚ã‚Œã‚‹ï¼  ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã‚’å½¢æˆã™ã‚‹æŠ•ç¥¨ãªã©ã®è¡Œå‹•ã‚’ã¨ã‚‹ã¨ï¼Œå ±é…¬ãŒä¸ãˆã‚‰ã‚Œã‚‹ï¼ï¼ˆè©³ç´°ã¯å‚è€ƒæ–‡çŒ®[1]ï¼‰  

ã“ã‚Œã‚‰ã®å ±é…¬ã«ã‚ˆã£ã¦ï¼Œãƒãƒªãƒ‡ãƒ¼ã‚¿ã¯ãƒã‚§ãƒ¼ãƒ³ã«è²¢çŒ®ã™ã‚‹ã‚ˆã†ã«ä¿ƒé€²ã•ã‚Œã‚‹ï¼  

## å‚è€ƒæ–‡çŒ®
[[1]Ethrerum Blog Validated, staking on eth2: #1 - Incentives](https://blog.ethereum.org/2020/01/13/validated-staking-on-eth2-1-incentives/) // Jan 2020

[[2]Ethereum  casper_basics.pdf](https://arxiv.org/pdf/1710.09437.pdf) // 22 Jan 2019

[[3]individua1  CasperFFG](https://individua1.net/casper-ffg-dynamic-validator-sets/) //June 2017

[YouTube-PoS,CapserFFGã«ã¤ã„ã¦](https://www.youtube.com/watch?v=RwjJmsyfKFk)

[block-chain.jp byã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ãƒ»ãƒ™ã‚¤ã‚¹ã€€Casperã«ã¤ã„ã¦](https://block-chain.jp/ethereum/casper1/)  //2017-2018

